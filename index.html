<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Path | Deep Space Edition</title>
    
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        void: {
                            950: '#020617', // Pitch Black
                            900: '#0f172a', // Deep Slate
                            800: '#1e293b', // Slate
                        },
                        starlight: {
                            500: '#3b82f6', // Electric Blue
                            400: '#60a5fa', // Sky Blue
                            300: '#93c5fd', // Pale Blue
                        },
                        gold: {
                            600: '#d97706',
                            500: '#f59e0b',
                            400: '#fbbf24',
                            300: '#fcd34d',
                        }
                    },
                    backgroundImage: {
                        'deep-space': 'radial-gradient(circle at 50% 0%, #1e1b4b 0%, #020617 60%)',
                        'gold-gradient': 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                        'glass-gradient': 'linear-gradient(180deg, rgba(30, 41, 59, 0.7) 0%, rgba(15, 23, 42, 0.6) 100%)',
                        'card-shimmer': 'linear-gradient(45deg, rgba(255,255,255,0) 40%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 60%)',
                    },
                    boxShadow: {
                        'neon-gold': '0 0 20px rgba(245, 158, 11, 0.3)',
                        'neon-blue': '0 0 20px rgba(59, 130, 246, 0.3)',
                        'card-glow': '0 0 40px rgba(59, 130, 246, 0.15)',
                    },
                    animation: {
                        'spin-slow': 'spin 12s linear infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-glow': 'pulseGlow 4s ease-in-out infinite',
                        'shimmer': 'shimmer 3s infinite linear',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        pulseGlow: {
                            '0%, 100%': { opacity: 0.6, transform: 'scale(1)' },
                            '50%': { opacity: 1, transform: 'scale(1.05)' },
                        },
                        shimmer: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(100%)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- 2. React & Framer Motion via Import Map -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.3.1",
            "react-dom/client": "https://esm.sh/react-dom@18.3.1/client",
            "framer-motion": "https://esm.sh/framer-motion@10.16.4?external=react,react-dom"
        }
    }
    </script>
    
    <!-- 3. Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 4. Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <style>
        /* Typography */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Inter:wght@300;400;600&family=Rozha+One&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #e2e8f0; }
        h1, h2, h3, h4, .font-serif { font-family: 'Cinzel', serif; }
        .font-hindi { font-family: 'Rozha One', serif; }

        /* Premium Glassmorphism */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        /* 3D Sphere CSS */
        .planet-orb {
            background: radial-gradient(circle at 30% 30%, #fbbf24, #d97706, #78350f);
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.6), 0 0 20px rgba(245, 158, 11, 0.4);
            border-radius: 50%;
        }
        
        .blue-orb {
            background: radial-gradient(circle at 30% 30%, #60a5fa, #3b82f6, #1e3a8a);
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.6), 0 0 25px rgba(59, 130, 246, 0.6);
            border-radius: 50%;
        }

        /* Scrollbar Hide */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body class="overflow-x-hidden min-h-screen selection:bg-gold-500 selection:text-black">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef, useCallback } from 'react';
        import { createRoot } from 'react-dom/client';
        import { motion, AnimatePresence } from 'framer-motion';

        // --- SOUND & DATA ---
        const SFX = {
            HOVER: "https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3", 
            CLICK: "https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3", 
            REVEAL: "https://cdn.pixabay.com/audio/2022/03/24/audio_823c316712.mp3", 
        };

        const calculateLifePath = (dateString) => {
            const digits = dateString.replace(/\D/g, '').split('').map(Number);
            if (digits.length === 0) return 0;
            let sum = digits.reduce((a, b) => a + b, 0);
            while (sum > 9 && sum !== 11 && sum !== 22 && sum !== 33) {
                const sumDigits = sum.toString().split('').map(Number);
                sum = sumDigits.reduce((a, b) => a + b, 0);
            }
            return sum;
        };

        const COSMIC_DATA = {
            1: { planet: "Sun (Surya)", crystal: "Ruby", meaning: "You carry the radiance of the Sun. A born leader with natural authority, your soul chosen a path of vitality and creation.", meaning_hi: "‡§Ü‡§™ ‡§∏‡•Ç‡§∞‡•ç‡§Ø (Surya) ‡§ï‡•á ‡§§‡•á‡§ú ‡§ï‡•ã ‡§ß‡§æ‡§∞‡§£ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§è‡§ï ‡§ú‡§®‡•ç‡§Æ‡§ú‡§æ‡§§ ‡§®‡•á‡§§‡§æ ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§§‡•ç‡§Æ‡§æ ‡§®‡•á ‡§ú‡•Ä‡§µ‡§® ‡§∂‡§ï‡•ç‡§§‡§ø ‡§î‡§∞ ‡§∏‡•É‡§ú‡§® ‡§ï‡§æ ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§ö‡•Å‡§®‡§æ ‡§π‡•à‡•§", hex: "#ef4444", aura: "shadow-red-500/50" }, 
            2: { planet: "Moon (Chandra)", crystal: "Moonstone", meaning: "Guided by the Moon, you are the peacemaker. Your intuition is your superpower.", meaning_hi: "‡§ö‡§Ç‡§¶‡•ç‡§∞‡§Æ‡§æ (Chandra) ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§ø‡§§, ‡§Ü‡§™ ‡§∂‡§æ‡§Ç‡§§‡§ø‡§¶‡•Ç‡§§ ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•Ä ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§ú‡•ç‡§û‡§æ‡§® ‡§∂‡§ï‡•ç‡§§‡§ø (Intuition) ‡§π‡•Ä ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡•Ä ‡§§‡§æ‡§ï‡§§ ‡§π‡•à‡•§", hex: "#e0e7ff", aura: "shadow-indigo-200/50" }, 
            3: { planet: "Jupiter (Guru)", crystal: "Yellow Sapphire", meaning: "Blessed by Jupiter, you are the creator. Optimism flows through you naturally.", meaning_hi: "‡§¨‡•É‡§π‡§∏‡•ç‡§™‡§§‡§ø (Guru) ‡§ï‡•Ä ‡§ï‡•É‡§™‡§æ ‡§∏‡•á, ‡§Ü‡§™ ‡§è‡§ï ‡§∞‡§ö‡§Ø‡§ø‡§§‡§æ ‡§π‡•à‡§Ç‡•§ ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï‡§§‡§æ ‡§Ü‡§™ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§µ‡§æ‡§≠‡§æ‡§µ‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡§π‡§§‡•Ä ‡§π‡•à‡•§", hex: "#fbbf24", aura: "shadow-amber-400/50" }, 
            4: { planet: "Rahu", crystal: "Hessonite", meaning: "You are the builder of foundations. Where others see chaos, you create order.", meaning_hi: "‡§Ü‡§™ ‡§®‡•Ä‡§Ç‡§µ ‡§ï‡•á ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§§‡§æ ‡§π‡•à‡§Ç‡•§ ‡§ú‡§π‡§æ‡§Å ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§Ö‡§∞‡§æ‡§ú‡§ï‡§§‡§æ ‡§¶‡§ø‡§ñ‡§§‡•Ä ‡§π‡•à, ‡§Ü‡§™ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ (Order) ‡§¨‡§®‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§", hex: "#ea580c", aura: "shadow-orange-600/50" }, 
            5: { planet: "Mercury (Budh)", crystal: "Emerald", meaning: "You are the free spirit. Adaptable and quick-witted, luck favors your adventurous heart.", meaning_hi: "‡§Ü‡§™ ‡§è‡§ï ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§Ü‡§§‡•ç‡§Æ‡§æ ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§®‡•Ä‡§Ø ‡§î‡§∞ ‡§§‡•á‡§ú-‡§§‡§∞‡•ç‡§∞‡§æ‡§∞, ‡§≠‡§æ‡§ó‡•ç‡§Ø ‡§Ü‡§™‡§ï‡•á ‡§∏‡§æ‡§π‡§∏‡•Ä ‡§¶‡§ø‡§≤ ‡§ï‡§æ ‡§∏‡§æ‡§• ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§", hex: "#34d399", aura: "shadow-emerald-400/50" }, 
            6: { planet: "Venus (Shukra)", crystal: "Diamond", meaning: "You are the nurturer. Driven by love and beauty, you bring harmony to every life you touch.", meaning_hi: "‡§∂‡•Å‡§ï‡•ç‡§∞ (Shukra) ‡§ï‡•á ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ ‡§Æ‡•á‡§Ç, ‡§Ü‡§™ ‡§™‡§æ‡§≤‡§®‡§π‡§æ‡§∞ ‡§π‡•à‡§Ç‡•§ ‡§™‡•ç‡§∞‡•á‡§Æ ‡§î‡§∞ ‡§∏‡•Å‡§Ç‡§¶‡§∞‡§§‡§æ ‡§∏‡•á ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§π‡•ã‡§ï‡§∞, ‡§Ü‡§™ ‡§∏‡§æ‡§Æ‡§Ç‡§ú‡§∏‡•ç‡§Ø ‡§≤‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§", hex: "#fbcfe8", aura: "shadow-pink-300/50" }, 
            7: { planet: "Ketu", crystal: "Cat's Eye", meaning: "You are the seeker of truth. Your spiritual insight pierces through illusions.", meaning_hi: "‡§Ü‡§™ ‡§∏‡§§‡•ç‡§Ø ‡§ï‡•á ‡§∏‡§æ‡§ß‡§ï ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø ‡§≠‡•ç‡§∞‡§Æ ‡§ï‡•ã ‡§≠‡•á‡§¶‡§§‡•Ä ‡§π‡•à‡•§", hex: "#2dd4bf", aura: "shadow-teal-400/50" }, 
            8: { planet: "Saturn (Shani)", crystal: "Blue Sapphire", meaning: "You are the master of destiny. Through discipline and ambition, you achieve karmic balance.", meaning_hi: "‡§Ü‡§™ ‡§≠‡§æ‡§ó‡•ç‡§Ø ‡§ï‡•á ‡§∏‡•ç‡§µ‡§æ‡§Æ‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§î‡§∞ ‡§Æ‡§π‡§§‡•ç‡§µ‡§æ‡§ï‡§æ‡§Ç‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á, ‡§Ü‡§™ ‡§ï‡§∞‡•ç‡§Æ‡§ø‡§ï ‡§∏‡§Ç‡§§‡•Å‡§≤‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§", hex: "#6366f1", aura: "shadow-indigo-500/50" }, 
            9: { planet: "Mars (Mangal)", crystal: "Red Coral", meaning: "You are the warrior of light. Compassionate yet fierce, you fight for what is right.", meaning_hi: "‡§Ü‡§™ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂ ‡§ï‡•á ‡§Ø‡•ã‡§¶‡•ç‡§ß‡§æ ‡§π‡•à‡§Ç‡•§ ‡§¶‡§Ø‡§æ‡§≤‡•Å ‡§≤‡•á‡§ï‡§ø‡§® ‡§â‡§ó‡•ç‡§∞, ‡§Ü‡§™ ‡§ú‡•ã ‡§∏‡§π‡•Ä ‡§π‡•à ‡§â‡§∏‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç‡•§", hex: "#ef4444", aura: "shadow-red-500/50" }, 
            11: { planet: "Master Number", crystal: "Labradorite", meaning: "The Spiritual Messenger. You possess high intuition and a charisma that inspires others.", meaning_hi: "‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§∏‡§Ç‡§¶‡•á‡§∂‡§µ‡§æ‡§π‡§ï‡•§ ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§â‡§ö‡•ç‡§ö ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§ú‡•ç‡§û‡§æ‡§® ‡§î‡§∞ ‡§ê‡§∏‡§æ ‡§ï‡§∞‡§ø‡§∂‡•ç‡§Æ‡§æ ‡§π‡•à ‡§ú‡•ã ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§", hex: "#a855f7", aura: "shadow-purple-500/50" }, 
            22: { planet: "Master Number", crystal: "Black Tourmaline", meaning: "The Master Builder. You have the rare power to turn massive dreams into tangible reality.", meaning_hi: "‡§Æ‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§§‡§æ‡•§ ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§µ‡§ø‡§∂‡§æ‡§≤ ‡§∏‡§™‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§†‡•ã‡§∏ ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï‡§§‡§æ ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§®‡•á ‡§ï‡•Ä ‡§¶‡•Å‡§∞‡•ç‡§≤‡§≠ ‡§∂‡§ï‡•ç‡§§‡§ø ‡§π‡•à‡•§", hex: "#64748b", aura: "shadow-slate-500/50" }, 
            33: { planet: "Master Number", crystal: "Lapis Lazuli", meaning: "The Master Teacher. Your path is one of pure devotion. You guide others by love.", meaning_hi: "‡§Æ‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§≠‡§ï‡•ç‡§§‡§ø ‡§ï‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡•á‡§Æ ‡§∏‡•á ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§", hex: "#3b82f6", aura: "shadow-blue-500/50" } 
        };

        const useAudio = () => {
            const hoverAudio = useRef(new Audio(SFX.HOVER));
            const clickAudio = useRef(new Audio(SFX.CLICK));
            const revealAudio = useRef(new Audio(SFX.REVEAL));
            useEffect(() => { hoverAudio.current.volume = 0.2; clickAudio.current.volume = 0.4; revealAudio.current.volume = 0.6; }, []);
            return {
                playHover: useCallback(() => { hoverAudio.current.currentTime = 0; hoverAudio.current.play().catch(() => {}); }, []),
                playClick: useCallback(() => { clickAudio.current.currentTime = 0; clickAudio.current.play().catch(() => {}); }, []),
                playReveal: useCallback(() => { revealAudio.current.currentTime = 0; revealAudio.current.play().catch(() => {}); }, [])
            };
        };

        // --- 3D ICON COMPONENTS ---

        const HeaderIcon = () => (
            <div className="relative w-24 h-24 mx-auto mb-6">
                <div className="absolute inset-0 rounded-full bg-gold-500/20 blur-xl animate-pulse"></div>
                <div className="planet-orb w-full h-full relative z-10 animate-float flex items-center justify-center">
                    <div className="absolute w-[140%] h-[30%] border border-white/30 rounded-[50%] top-[35%] left-[-20%] rotate-[-15deg] shadow-[0_0_10px_rgba(255,255,255,0.2)]"></div>
                    <div className="w-2 h-2 bg-white rounded-full absolute top-[35%] left-[-20%] animate-pulse shadow-[0_0_10px_white]"></div>
                </div>
            </div>
        );

        const CosmicCrystal = ({ hexColor }) => {
            return (
                <div className="relative w-64 h-64 flex items-center justify-center my-6 perspective-1000">
                    <motion.div initial={{ opacity: 0 }} animate={{ opacity: [0.3, 0.6, 0.3], scale: [1, 1.2, 1] }} transition={{ duration: 4, repeat: Infinity }} className="absolute inset-0 rounded-full blur-[80px]" style={{ background: hexColor }} />
                    <motion.div className="relative w-32 h-32" animate={{ rotateY: [0, 360], rotateX: [10, -10, 10] }} transition={{ rotateY: { duration: 12, repeat: Infinity, ease: "linear" }, rotateX: { duration: 6, repeat: Infinity, ease: "easeInOut" } }} style={{ transformStyle: "preserve-3d" }}>
                        <svg viewBox="0 0 100 100" className="w-full h-full overflow-visible drop-shadow-[0_0_20px_rgba(255,255,255,0.3)]">
                            <defs>
                                <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                                    <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                    <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                </filter>
                                <linearGradient id="crystalGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stopColor={hexColor} stopOpacity="0.8" />
                                    <stop offset="100%" stopColor="white" stopOpacity="0.4" />
                                </linearGradient>
                            </defs>
                            <motion.path d="M50 5 L95 50 L50 95 L5 50 Z" fill="url(#crystalGrad)" stroke={hexColor} strokeWidth="1" filter="url(#glow)" initial={{ pathLength: 0, opacity: 0 }} animate={{ pathLength: 1, opacity: 1 }} transition={{ duration: 2, ease: "easeOut" }} />
                            <motion.path d="M50 5 L50 95 M5 50 L95 50" fill="none" stroke="white" strokeWidth="0.5" opacity="0.8" filter="url(#glow)" />
                        </svg>
                    </motion.div>
                </div>
            );
        };

        const CardIcon = () => (
             <div className="relative w-20 h-20 flex items-center justify-center">
                 <div className="blue-orb w-16 h-16 relative z-10 shadow-neon-blue"></div>
                 <div className="absolute inset-0 border border-starlight-400/30 rounded-full animate-spin-slow border-dashed"></div>
                 <div className="absolute w-full h-full rounded-full border border-white/10 animate-pulse scale-125"></div>
             </div>
        );

        // --- ENHANCED MYSTERY CARD ---
        const MysteryCard = ({ onClick, isSelected, isRevealing, playHover, index }) => {
            if (isRevealing && !isSelected) return <motion.div animate={{ opacity: 0, scale: 0.8 }} transition={{ duration: 0.5 }} className="w-36 h-56 md:w-48 md:h-72" />;
            
            // Symmetric Motion Logic: Middle card moves opposite to outer cards
            const yOffset = index % 2 === 0 ? [0, -20, 0] : [0, 20, 0];
            const rotateTilt = index % 2 === 0 ? [0, 2, 0] : [0, -2, 0];

            return (
                <motion.div 
                    onClick={onClick} 
                    onMouseEnter={playHover}
                    animate={isRevealing ? { 
                        rotateY: [0, 720, 1080], 
                        scale: [1, 1.2, 0], 
                        opacity: [1, 1, 0], 
                        filter: ["brightness(1)", "brightness(2)", "brightness(5)"] 
                    } : { 
                        y: yOffset,
                        rotate: rotateTilt
                    }}
                    transition={isRevealing ? { duration: 2.5, ease: "easeInOut" } : { duration: 6, repeat: Infinity, ease: "easeInOut" }}
                    whileHover={!isRevealing ? { scale: 1.05, y: -30, zIndex: 50, filter: "brightness(1.1)" } : {}}
                    className="relative w-36 h-56 md:w-48 md:h-72 cursor-pointer perspective-1000 group z-10"
                >
                    {/* Glowing Aura Background (Only on Hover) */}
                    <div className="absolute -inset-4 bg-starlight-500/20 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

                    <div className="w-full h-full glass-panel rounded-2xl flex flex-col items-center justify-center relative overflow-hidden transition-all duration-300 group-hover:border-starlight-400/80 group-hover:shadow-card-glow border-starlight-500/20">
                        {/* Deep Space Card Texture */}
                        <div className="absolute inset-0 opacity-40 bg-cover bg-center" style={{ backgroundImage: 'url("https://www.transparenttextures.com/patterns/stardust.png")' }}></div>
                        <div className="absolute inset-0 bg-gradient-to-b from-starlight-900/40 to-void-950/80"></div>
                        
                        {/* Shimmer Effect */}
                        <div className="absolute inset-0 bg-card-shimmer -translate-x-full group-hover:animate-shimmer"></div>

                        <div className="relative z-10 mb-4 transform group-hover:scale-110 transition-transform duration-500">
                             <CardIcon />
                        </div>
                        <span className="text-xs tracking-[0.3em] text-starlight-200 uppercase font-bold mt-2 drop-shadow-md group-hover:text-white transition-colors">Cosmic</span>
                    </div>
                </motion.div>
            );
        };

        // --- MAIN APP ---

        function App() {
            const [step, setStep] = useState('input');
            const [birthDate, setBirthDate] = useState('');
            const [calculatedNum, setCalculatedNum] = useState(null);
            const [selectedBox, setSelectedBox] = useState(null);
            const { playHover, playClick, playReveal } = useAudio();

            useEffect(() => {
                if (step === 'result') {
                    playReveal();
                    const colors = ['#f59e0b', '#ffffff', '#3b82f6'];
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors });
                    setTimeout(() => { confetti({ particleCount: 50, angle: 60, spread: 55, origin: { x: 0 }, colors }); confetti({ particleCount: 50, angle: 120, spread: 55, origin: { x: 1 }, colors }); }, 400);
                }
            }, [step]);

            const handleDateSubmit = (e) => {
                e.preventDefault(); playClick(); if (!birthDate) return;
                setCalculatedNum(calculateLifePath(birthDate)); setStep('boxes');
            };

            const handleBoxClick = (index) => {
                playClick(); setSelectedBox(index); setStep('revealing'); setTimeout(() => setStep('result'), 2500);
            };

            const data = COSMIC_DATA[calculatedNum] || COSMIC_DATA[1];

            return (
                <div className="min-h-screen flex items-center justify-center p-4 relative overflow-hidden bg-deep-space text-white">
                    {/* Deep Space Background Stars */}
                    <div className="fixed inset-0 pointer-events-none z-0">
                         <div className="absolute top-0 left-0 w-full h-full opacity-40" style={{backgroundImage: 'url("https://www.transparenttextures.com/patterns/stardust.png")'}}></div>
                         <div className="absolute bottom-[-20%] left-[20%] w-[60%] h-[40%] bg-blue-900/20 blur-[120px] rounded-full"></div>
                    </div>

                    <div className="relative z-10 w-full max-w-4xl mx-auto flex flex-col items-center">
                        <AnimatePresence mode="wait">
                            
                            {/* SCREEN 1: INPUT */}
                            {step === 'input' && (
                                <motion.div key="input" initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -20 }} className="text-center w-full max-w-md">
                                    <motion.div initial={{ scale: 0.9 }} animate={{ scale: 1 }} className="mb-10 inline-block">
                                        <HeaderIcon />
                                        <h1 className="text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-b from-white to-starlight-300 font-bold mb-3 tracking-wide drop-shadow-lg">
                                            Cosmic Path
                                        </h1>
                                        <p className="text-starlight-300/80 text-sm tracking-[0.3em] uppercase">Decode Your Destiny</p>
                                    </motion.div>

                                    <div className="glass-panel p-8 rounded-2xl relative overflow-hidden">
                                        <form onSubmit={handleDateSubmit}>
                                            <label className="block text-gold-400 text-xs font-bold uppercase tracking-[0.2em] mb-4">
                                                Enter Date of Birth
                                            </label>
                                            <input type="date" required value={birthDate} onChange={(e) => setBirthDate(e.target.value)}
                                                className="w-full bg-void-950/80 border border-void-800 focus:border-gold-500 focus:shadow-neon-gold text-white text-center text-xl rounded-lg py-4 px-4 outline-none transition-all duration-300 mb-8 placeholder-gray-600 appearance-none"
                                            />
                                            <motion.button whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} onMouseEnter={playHover}
                                                className="w-full bg-gold-gradient text-white font-bold py-4 rounded-lg uppercase tracking-widest text-sm shadow-lg hover:shadow-neon-gold border border-white/20"
                                            >
                                                Reveal My Path
                                            </motion.button>
                                        </form>
                                    </div>
                                </motion.div>
                            )}

                            {/* SCREEN 2: MYSTERY SELECTION */}
                            {(step === 'boxes' || step === 'revealing') && (
                                <motion.div key="boxes" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="text-center w-full">
                                    <h2 className="text-3xl text-starlight-300 font-serif mb-16 animate-pulse tracking-widest">The Universe Awaits...</h2>
                                    <div className="flex justify-center gap-6 md:gap-12 flex-wrap">
                                        {[0, 1, 2].map((index) => (
                                            <MysteryCard 
                                                key={index} 
                                                index={index} 
                                                onClick={() => handleBoxClick(index)} 
                                                isSelected={selectedBox === index} 
                                                isRevealing={step === 'revealing'} 
                                                playHover={playHover} 
                                            />
                                        ))}
                                    </div>
                                </motion.div>
                            )}

                            {/* SCREEN 3: RESULT REVEAL */}
                            {step === 'result' && (
                                <motion.div key="result" className="w-full max-w-md">
                                    <motion.div initial={{ opacity: 1 }} animate={{ opacity: 0 }} transition={{ duration: 1 }} className="fixed inset-0 bg-white z-50 pointer-events-none" />
                                    <motion.div initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.5, type: "spring", duration: 1 }} className="glass-panel rounded-[2rem] p-1 relative overflow-hidden border-gold-500/30">
                                        
                                        <div className="bg-gradient-to-b from-void-900 to-black rounded-[1.8rem] p-6 md:p-10 flex flex-col items-center text-center relative z-10">
                                            
                                            <motion.div initial={{ y: -20, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ delay: 0.8 }} className="inline-block px-4 py-1 rounded-full border border-white/20 bg-white/5 text-[10px] font-bold tracking-[0.2em] text-white uppercase mb-4 shadow-sm">
                                                Life Path {calculatedNum}
                                            </motion.div>

                                            <motion.h2 initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 1 }} className="text-3xl md:text-4xl text-white mb-2 font-serif text-shadow-lg">{data.planet} Energy</motion.h2>

                                            <CosmicCrystal hexColor={data.hex} />

                                            <motion.h3 initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 1.2 }} className="text-4xl md:text-5xl font-serif text-transparent bg-clip-text bg-gradient-to-r from-white to-starlight-300 mb-6 drop-shadow-md" style={{ textShadow: `0 0 30px ${data.hex}` }}>{data.crystal}</motion.h3>

                                            <div className="max-w-md mx-auto mb-10 space-y-6">
                                                <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 1.4 }} className="text-white text-lg md:text-xl leading-relaxed italic font-light tracking-wide">"{data.meaning}"</motion.p>
                                                <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 1.6 }} className="text-gold-400 text-xl md:text-2xl leading-relaxed font-hindi tracking-wide drop-shadow-md">"{data.meaning_hi}"</motion.p>
                                            </div>

                                            {/* Gift CTA */}
                                            <motion.div initial={{ y: 30, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ delay: 1.8, type: "spring" }} className="w-full bg-void-950 border border-gold-500/30 rounded-xl p-6 relative group overflow-hidden shadow-2xl">
                                                <div className="absolute inset-0 bg-gradient-to-r from-transparent via-gold-400/10 to-transparent -translate-x-full group-hover:animate-[shimmer_2s_infinite]"></div>
                                                <div className="flex flex-col items-center gap-3 relative z-10">
                                                    <div className="flex items-center gap-2">
                                                        <span className="text-xl animate-bounce">üéÅ</span>
                                                        <span className="text-xs font-bold tracking-widest text-gold-400 uppercase">Claim Your Gift</span>
                                                    </div>
                                                    <p className="text-slate-400 text-xs mb-2">Unlock clarity & protection with a blessed <strong className="text-white">Rudraksha</strong>.</p>
                                                    <motion.a href="https://destini-number-studio.netlify.app/" target="_blank" whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} onMouseEnter={playHover} className="w-full block bg-gold-gradient text-white font-bold py-3 rounded-lg text-sm shadow-neon-gold transition-all border border-white/20">Claim Free Panch-Mukhi Rudraksha</motion.a>
                                                </div>
                                            </motion.div>

                                            <button onClick={() => { playClick(); setStep('input'); setBirthDate(''); }} className="mt-8 text-sm text-slate-500 hover:text-white underline transition-colors">Check Another Date</button>
                                        </div>
                                    </motion.div>
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </div>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>